import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.C1SLTdIO.js";import{t as c}from"./contact-us.D-J7bnCy.js";import{s as $}from"./seo-data-site.CLNeXSAF.js";import{a as w}from"./app-config.zEQo3iYE.js";import{Y as B}from"./index.CqrHhE94.js";import{l as r}from"./locale_text_site.BvdD-9Qv.js";import{t as m}from"./burger-menu-react.BkVEGyzS.js";import{T as V,L,I as P}from"./index.DGWBDbFy.js";import{R as D}from"./index.n-Ca5uiV.js";import"./iconBase.10d0k-hK.js";const O=async h=>{const{name:f,contact:x,message:d}=h,b=`
    Новый запрос на связь (форма Контакты):
    Имя: ${f}   
    Email/Телефон: ${x}
    Сообщение: ${d}
  `,u=`https://api.telegram.org/bot${w.TOKEN_TELEGRAM}/sendMessage`;try{if(!(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:w.CHAT_ID_TELEGRAM,text:b,parse_mode:"HTML"})})).ok)throw new Error("Ошибка при отправке данных в Telegram");return{success:!0,message:"Сообщение успешно отправлено в Telegram."}}catch(t){return console.error("Ошибка при отправке данных в Telegram:",t),{success:!1,message:"Ошибка при отправке данных в Telegram."}}};function X(){const[h,f]=s.useState(null),[x,d]=s.useState(null),[b,u]=s.useState(!1),[t,k]=s.useState("phone"),[R,I]=s.useState(!1),[g,v]=s.useState(!1),[a,C]=s.useState({name:c.data.is_fio_form?"":"NotName",contact:"",message:c.data.is_message_active?"":"Интересует оформление заказа / подробности"}),[n,M]=s.useState({name:!!c.data.is_fio_form,contact:!1,message:!1,terms:!1}),[N,_]=s.useState(!1);s.useEffect(()=>{const l=c.data.is_fio_form?a.name.trim()!=="":!0,i=a.message.trim()!=="";let o=!1;t==="email"?o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.contact):t==="phone"&&(o=a.contact.replace(/\D/g,"").length===11),_(l&&o&&i&&g)},[a,t,g]);const y=l=>{const{name:i,value:o}=l.target;C(F=>({...F,[i]:o}))},S=l=>{const{value:i}=l.target;C(o=>({...o,contact:i}))};async function T(l){l.preventDefault(),u(!0),f(null),d(null);const i=t==="email"?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.contact):!0,o=a.contact.replace(/\D/g,""),F=t==="phone"?o.length===11:!0,p={name:!a.name.trim(),contact:!a.contact||t==="phone"&&!F||t==="email"&&!i,message:!a.message.trim(),terms:!g};if(M(p),p.name||p.contact||p.message||p.terms){d(r.components.reactComponents.feedbackForm.errorRequiredFields),u(!1);return}const E={...a};try{const j=await O(E);if(!j.success){d(j.message||r.components.reactComponents.feedbackForm.errorDefaultSendForm),u(!1);return}f(j.message||r.components.reactComponents.feedbackForm.successDefaultSendMessage),t==="phone"&&(window.location.href=`/thank-you?phone=${a.contact}`),t==="email"&&(window.location.href=`/thank-you?email=${a.contact}`)}catch{d(r.components.reactComponents.feedbackForm.errorSendForm)}finally{u(!1)}}return e.jsxs("form",{onSubmit:T,className:"bg-white text-gray-900 p-6 rounded-md shadow-md space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"name",placeholder:c.data.formPlaceholderName,value:a.name,onChange:y,className:`${c.data.is_fio_form?"":"hidden"} w-full px-4 py-3 border-2 rounded-md outline-none focus:ring-4 ${n.name?"border-red-400 ring-red-100":"border-gray-300 focus:border-gray-600 ring-gray-100"}`}),n.name&&e.jsx("p",{className:"text-red-500 text-sm",children:r.components.reactComponents.feedbackForm.errorFormName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"contactMethod",value:"phone",checked:t==="phone",onChange:()=>k("phone")}),r.components.reactComponents.feedbackForm.labelPhone]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"contactMethod",value:"email",checked:t==="email",onChange:()=>k("email")}),r.components.reactComponents.feedbackForm.labelEmail]})]}),t==="phone"&&e.jsx(D,{mask:r.components.reactComponents.feedbackForm.maskPlaceholder,placeholder:r.components.reactComponents.feedbackForm.contactMethodPlaceholder,name:"contact",value:a.contact,onChange:S,required:!0,className:`w-full px-4 py-3 border-2 rounded-md outline-none focus:ring-4 ${n.contact?"border-red-400 ring-red-100":"border-gray-300 focus:border-gray-600 ring-gray-100"}`}),t==="email"&&e.jsx("input",{type:"email",placeholder:r.components.reactComponents.feedbackForm.emailPlaceholder,name:"contact",value:a.contact,onChange:y,required:!0,className:`w-full px-4 py-3 border-2 rounded-md outline-none focus:ring-4 ${n.contact?"border-red-400 ring-red-100":"border-gray-300 focus:border-gray-600 ring-gray-100"}`}),n.contact&&e.jsx("p",{className:"text-red-500 text-sm",children:t==="phone"?r.components.reactComponents.feedbackForm.errorFormPhone:r.components.reactComponents.feedbackForm.errorFormEmail})]}),e.jsxs("div",{children:[e.jsx("textarea",{name:"message",rows:4,placeholder:c.data.formPlaceholderTexarea,value:a.message,onChange:y,required:!0,className:`${c.data.is_message_active?"":"hidden"} w-full px-4 py-3 border-2 rounded-md outline-none focus:ring-4 ${n.message?"border-red-400 ring-red-100":"border-gray-300 focus:border-gray-600 ring-gray-100"}`}),n.message&&e.jsx("p",{className:"text-red-500 text-sm",children:r.components.reactComponents.feedbackForm.errorFormMessage})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("input",{name:"agreeToTerms",type:"checkbox",id:"agreeToTerms",checked:g,onChange:()=>v(!g),className:"mt-1"}),e.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm",children:["Я соглашаюсь с ",e.jsx("a",{href:"/privacy-policy",target:"_blank",className:"text-blue-600 underline",children:"политикой конфиденциальности"})," и ",e.jsx("a",{href:"/user-agreement",target:"_blank",className:"text-blue-600 underline",children:"пользовательским соглашением"}),"."]})]}),n.terms&&e.jsx("p",{className:"text-red-500 text-sm",children:"Чтобы продолжить необходимо принять условия."}),m.BurgerMenu.email&&e.jsxs("a",{href:`mailto:${m.BurgerMenu.email.title}`,className:"w-full text-center text-[#00FF00] transition-colors duration-300 hover:text-[#FF00FF] bg-gray-900 rounded-lg p-2 flex justify-center items-center space-x-2",children:[e.jsx(V,{size:24}),e.jsx("span",{children:"Email"})]}),m.BurgerMenu.telegram_number.title&&e.jsxs("a",{href:`https://t.me/${m.BurgerMenu.telegram_number.title}`,className:"w-full text-center text-[#00FF00] transition-colors duration-300 hover:text-[#FF00FF] bg-gray-900 rounded-lg p-2 flex justify-center items-center space-x-2",children:[e.jsx(L,{size:24}),e.jsx("span",{children:"Telegram"})]}),m.BurgerMenu.whatsapp_number.title&&e.jsxs("a",{href:`https://wa.me/${m.BurgerMenu.whatsapp_number.title}`,className:"w-full text-center text-[#00FF00] transition-colors duration-300 hover:text-[#FF00FF] bg-gray-900 rounded-lg p-2 flex justify-center items-center space-x-2",children:[e.jsx(P,{size:24}),e.jsx("span",{children:"WhatsApp"})]}),m.BurgerMenu.vk_link.title&&e.jsxs("a",{href:`https://vk.com/${m.BurgerMenu.vk_link.title}`,className:"w-full text-center text-[#00FF00] transition-colors duration-300 hover:text-[#FF00FF] bg-gray-900 rounded-lg p-2 flex justify-center items-center space-x-2",children:[e.jsx("img",{src:"/VKLogo.png",width:24,height:24,alt:"Logo VK"}),e.jsx("span",{children:"ВКонтакте"})]}),e.jsx(B,{yaGoalTitle:$.yaGoalTitleContactForm,onClick:()=>T,children:e.jsx("button",{type:"submit",disabled:!N||b,className:`w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 ${N?"":"opacity-50 cursor-not-allowed"}`,children:b?r.components.reactComponents.feedbackForm.btnSpinnerLoader:r.components.reactComponents.feedbackForm.btnSend})}),h&&e.jsx("p",{className:"text-green-500 mt-4",children:h}),x&&e.jsx("p",{className:"text-red-500 mt-4",children:x})]})}export{X as default};
