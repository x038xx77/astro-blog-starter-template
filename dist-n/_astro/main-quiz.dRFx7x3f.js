import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.C1SLTdIO.js";import{t as o}from"./quiz.dbW5IS76.js";import{s as L}from"./seo-data-site.CLNeXSAF.js";import{c as O,F as U,d as W,e as D,f as B}from"./index.ByL9aElP.js";import{a as z}from"./app-config.zEQo3iYE.js";import{Y as H}from"./index.CqrHhE94.js";import{t as F}from"./contact-us.D-J7bnCy.js";import{R as Y}from"./index.n-Ca5uiV.js";import{a as E}from"./index.BXk8rcrj.js";import"./iconBase.10d0k-hK.js";async function J({api_token:c,my_channel_name:d,userData:l,userAnswers:t,setOpenModalInit:s,setPhone:m,setName:h,setEmail:u,onClose:b}){try{const g=`
      User Name: ${l.name}

      User Email: ${l.email}

      User Phone: ${l.phone}

      Preferred Contact Method: ${l.contactMethod}

      Answers:

      ${t.map(i=>`${i.question}: ${i.answer}`).join(`
`)}
    `,f=`https://api.telegram.org/bot${c}/sendMessage`;if(!(await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:d,text:`–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –°–∞–π—Ç–∞:
${g}`,parse_mode:"HTML"})})).ok)throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram");return console.log("–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"),s(!0),m(""),h(""),u(""),setTimeout(()=>{s(!1),b()},2e3),{success:!0,message:"–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram."}}catch(g){return console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram:",g),{success:!1,message:"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram."}}}const K=({open:c,onClose:d,message:l})=>c?e.jsx("div",{className:"fixed   inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-lg",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-lg font-medium text-gray-900",children:l})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors","aria-label":"–ó–∞–∫—Ä—ã—Ç—å",children:"–ó–∞–∫—Ä—ã—Ç—å"})})]})}):null,V=({setShowModalQuiz:c,onQuizComplete:d})=>{const[l,t]=a.useState(""),[s,m]=a.useState(0),[h,u]=a.useState(null),[b,g]=a.useState([]),[f,N]=a.useState(!1),[i,j]=a.useState(!1),[r,M]=a.useState({name:F.data.is_fio_form?"":"NotName",phone:"",email:"",terms:!1,contactMethod:"phone"}),[Q,$]=a.useState(""),[I,k]=a.useState(!1),q=n=>{u(n),t("")},A=()=>{if(!h){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º.");return}t(""),g([...b,{question:o.questions[s].question,answer:h}]),u(null),s+1<o.questions.length?m(s+1):N(!0)},P=()=>{s>0&&(m(s-1),u(b[s-1]?.answer||null))},_=()=>{c(!1),d()},w=n=>{const{name:x,value:v}=n.target;M(p=>({...p,[x]:v}))},y=n=>{M(x=>({...x,contactMethod:n.target.value}))},S=n=>n.replace(/\D/g,"").length===11,R=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),T=async()=>{const{name:n,phone:x,email:v,contactMethod:p}=r;if(!i){t("–í—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è!");return}if(p==="phone"&&!S(x)){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞!");return}if(p==="phone"&&!x){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞!");return}if(p==="email"&&!v){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ email!");return}if(p==="email"&&!R(v)){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email!");return}if(p==="telegram"&&!x&&!S(x)){t("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ Telegram!");return}if(t(""),(await J({api_token:z.TOKEN_TELEGRAM,my_channel_name:z.CHAT_ID_TELEGRAM,userData:r,userAnswers:b,setOpenModalInit:()=>{},setPhone:()=>{},setName:()=>{},setEmail:()=>{},onClose:()=>{}})).success){const G=new URLSearchParams({name:r.name,phone:r.phone,email:r.email}).toString();$("–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!"),k(!0),window.location.href=`/thank-you?${G}`}};return e.jsxs("div",{className:"fixed top-12 m-4 inset-0 flex items-center justify-center bg-black bg-opacity-80 transition-opacity duration-300",children:[e.jsx(K,{open:I,onClose:()=>[k(!1),_()],message:Q}),e.jsxs("div",{className:"relative w-[95%] max-w-md p-4 bg-gray-300 rounded-lg shadow-md transition-transform duration-300 transform max-h-[90vh] overflow-y-auto",children:["        ",e.jsx("button",{className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600",onClick:_,children:e.jsx(O,{})}),f?e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:o.modal_title}),e.jsx("p",{className:"text-lg",children:o.modal_subtitle}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex flex-col mb-2 text-sm overflow-hidden sm:text-lg",children:[e.jsx("label",{className:"font-semibold",children:"–ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏:"}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"phone",checked:r.contactMethod==="phone",onChange:y,className:"mr-2"}),e.jsx(U,{className:"text-xl mr-1"}),e.jsx("span",{children:"–¢–µ–ª–µ—Ñ–æ–Ω"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"telegram",checked:r.contactMethod==="telegram",onChange:y,className:"mr-2"}),e.jsx(W,{className:"text-xl mr-1"}),e.jsx("span",{children:"Telegram"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",value:"email",checked:r.contactMethod==="email",onChange:y,className:"mr-2"}),e.jsx(D,{className:"text-xl mr-1"}),e.jsx("span",{children:"Email"})]})]})]}),e.jsx("input",{type:"text",name:"name",value:r.name,placeholder:"–í–∞—à–µ –∏–º—è",onChange:w,className:`${F.data.is_fio_form?"":"hidden"} block w-full p-2 mb-2 border rounded`,required:!0}),(r.contactMethod==="phone"||r.contactMethod==="telegram")&&e.jsx(Y,{mask:"+7 (999) 999-99-99",name:"phone",value:r.phone,placeholder:"–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω",onChange:w,className:"block w-full p-2 mb-2 border rounded",required:!0}),r.contactMethod==="email"&&e.jsx("input",{type:"email",name:"email",value:r.email,placeholder:"–í–∞—à email",onChange:w,className:"block w-full p-2 mb-2 border rounded",required:!0}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:i,onChange:()=>j(!i),className:"mt-1"}),e.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm",children:["–Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å ",e.jsx("a",{href:"/privacy-policy",target:"_blank",className:"text-blue-600 underline",children:"–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏"})," –∏ ",e.jsx("a",{href:"/user-agreement",target:"_blank",className:"text-blue-600 underline",children:"–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º"}),"."]})]}),l&&e.jsx("div",{className:"text-red-500 mb-4",children:l})]}),i?e.jsx(H,{yaGoalTitle:L.yaGoalTitleQuiz,onClick:T,children:e.jsx("button",{className:`
                ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-800 text-gray-500 cursor-not-allowed"}
                mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600`,children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã"})}):e.jsx("button",{onClick:T,className:`
                ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-800 text-gray-500 cursor-not-allowed"}
                mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600`,children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã"})]}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl text-gray-500 font-bold mb-4",children:o.title}),e.jsx("p",{className:"text-gray-500",children:o.subtitle}),e.jsx("hr",{}),e.jsx("h3",{className:"text-gray-500 text-sm font-semibold mb-4 sm:text-lg",children:o.questions[s].question}),e.jsx("ul",{children:o.questions[s].options.map(n=>e.jsx("li",{className:`text-sm text-gray-500 cursor-pointer p-2 border rounded-md mb-2 transition-colors 
                  ${h===n?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,onClick:()=>q(n),children:n},n))}),e.jsxs("div",{className:"flex text-sm justify-between mt-4 sm:text-lg",children:[e.jsx("button",{onClick:P,disabled:s===0,className:`px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 ${s===0?"opacity-50 cursor-not-allowed":""}`,children:"–ù–∞–∑–∞–¥"}),e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"–î–∞–ª–µ–µ"})]}),l&&e.jsx("div",{className:"text-red-500 mb-4 break-words text-sm",children:l})]})]})]})},X="_fadeIn_cmcqj_1",Z={fadeIn:X},C=({children:c})=>e.jsx("div",{className:Z.fadeIn,children:c}),ee=({handleStartQuiz:c,handleCloseModal:d})=>{const[l,t]=a.useState(!1),[s,m]=a.useState(!1),[h,u]=a.useState(!1),[b,g]=a.useState(window.innerWidth<=640),f=()=>{d(),t(!1),m(!1),u(!1)},N=()=>{c(),t(!1)},i=()=>{t(!l)};return a.useEffect(()=>{const j=setTimeout(()=>{m(!0),u(!0)},3e3);return()=>clearTimeout(j)},[]),a.useEffect(()=>{const j=()=>{g(window.innerWidth<=640)};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),e.jsxs("div",{className:"fixed  top-[120px] right-10 z-30",children:[h&&e.jsx(C,{children:e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:i,className:"text-3xl",children:"üéÅ"})})}),l&&b&&e.jsx(C,{children:e.jsx("div",{className:"fixed  top-[70px] right-10 w-60 p-5 ",children:e.jsxs("div",{className:"relative cursor-pointer",children:[e.jsx("span",{className:"absolute top-0 left-0 w-full h-full mt-1 ml-1 bg-[#00FF00] rounded-lg "}),e.jsxs("div",{className:"relative p-6 bg-gray-100  border-2 border-[#00FF00]  rounded-lg hover:scale-105 transition duration-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl",children:"üéÅ"}),e.jsx("h3",{className:"my-2 ml-3 text-lg font-bold text-gray-800 ",children:o.icon_title_gift_box})]}),e.jsx("button",{"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",className:"absolute  top-2 right-2 p-1  rounded-full hover:bg-red-100",onClick:f,children:e.jsx(E,{color:"red"})}),e.jsx("h2",{className:"mt-5 text-gray-800",children:o.icon_subtitle_gift_box}),e.jsx("div",{children:e.jsx("button",{onClick:N,className:"mt-2 p-2 bg-blue-500 text-white rounded-lg hover:bg-green-600",children:o.icon_button_gift_box})})]})]})})}),e.jsx("div",{className:s?"hidden md:block":"hidden",children:e.jsx(C,{children:e.jsx("div",{className:" fixed  top-10 right-10 w-60 p-5 ",children:e.jsxs("div",{className:"relative top-[70px] cursor-pointer ",onClick:i,children:[e.jsx("span",{className:"absolute  top-0 left-0 w-full h-full mt-1 ml-1 bg-[#00FF00] rounded-lg "}),e.jsxs("div",{className:"relative p-6 bg-gray-100  border-2 border-[#00FF00]  rounded-lg hover:scale-105 transition duration-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl",children:"üéÅ"}),e.jsx("h3",{className:"my-2 ml-3 text-lg font-bold text-black",children:o.icon_title_gift_box})]}),e.jsx("h2",{className:"mt-5 text-black",children:o.icon_subtitle_gift_box}),e.jsx("div",{children:e.jsx("button",{onClick:N,className:"mt-2 p-2 bg-[#dedede] text-[#000000] rounded-lg hover:bg-green-600",children:o.icon_button_gift_box})}),e.jsx("button",{className:"absolute top-2 right-2 p-1  text-white rounded-full hover:bg-red-100",onClick:f,"aria-label":"–ó–∞–∫—Ä—ã—Ç—å",children:e.jsx(E,{color:"red"})})]})]})})})})]})},ue=()=>{const[c,d]=a.useState(!1),[l,t]=a.useState(!1),s=()=>{t(!1),d(!0)},m=()=>{t(!0)},h=()=>{d(!1),t(!0)};return e.jsxs("div",{className:"fixed bottom-4 right-4",style:{zIndex:16},children:[l&&e.jsx("div",{onClick:s,className:"cursor-pointer",children:e.jsx(B,{size:40,color:"blue"})}),e.jsx(ee,{handleStartQuiz:s,handleCloseModal:m}),c&&e.jsx("div",{className:"fixed  inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:e.jsx(V,{setShowModalQuiz:d,onQuizComplete:h})})})]})};export{ue as default};
