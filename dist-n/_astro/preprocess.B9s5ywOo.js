const fn=document.createElement("i");function qn(n){const r="&"+n+";";fn.innerHTML=r;const e=fn.textContent;return e.charCodeAt(e.length-1)===59&&n!=="semi"||e===r?!1:e}function Y(n,r,e,t){const i=n.length;let u=0,l;if(r<0?r=-r>i?0:i+r:r=r>i?i:r,e=e>0?e:0,t.length<1e4)l=Array.from(t),l.unshift(r,e),n.splice(...l);else for(e&&n.splice(r,e);u<t.length;)l=t.slice(u,u+1e4),l.unshift(r,0),n.splice(...l),u+=1e4,r+=1e4}function W(n,r){return n.length>0?(Y(n,n.length,0,r),n):r}const kn={}.hasOwnProperty;function Dn(n){const r={};let e=-1;for(;++e<n.length;)Vn(r,n[e]);return r}function Vn(n,r){let e;for(e in r){const i=(kn.call(n,e)?n[e]:void 0)||(n[e]={}),u=r[e];let l;if(u)for(l in u){kn.call(i,l)||(i[l]=[]);const a=u[l];Rn(i[l],Array.isArray(a)?a:a?[a]:[])}}}function Rn(n,r){let e=-1;const t=[];for(;++e<r.length;)(r[e].add==="after"?n:t).push(r[e]);Y(n,0,0,t)}function cn(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const U=J(/[A-Za-z]/),j=J(/[\dA-Za-z]/),Hn=J(/[#-'*+\--9=?A-Z^-~]/);function hn(n){return n!==null&&(n<32||n===127)}const pn=J(/\d/),Qn=J(/[\dA-Fa-f]/),Wn=J(/[!-/:-@[-`{-~]/);function z(n){return n!==null&&n<-2}function Q(n){return n!==null&&(n<0||n===32)}function y(n){return n===-2||n===-1||n===32}const jn=J(/\p{P}|\p{S}/u),Un=J(/\s/);function J(n){return r;function r(e){return e!==null&&e>-1&&n.test(String.fromCharCode(e))}}function F(n,r,e,t){const i=t?t-1:Number.POSITIVE_INFINITY;let u=0;return l;function l(x){return y(x)?(n.enter(e),a(x)):r(x)}function a(x){return y(x)&&u++<i?(n.consume(x),a):(n.exit(e),r(x))}}const Yn={tokenize:$n};function $n(n){const r=n.attempt(this.parser.constructs.contentInitial,t,i);let e;return r;function t(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),F(n,r,"linePrefix")}function i(a){return n.enter("paragraph"),u(a)}function u(a){const x=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=x),e=x,l(a)}function l(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return z(a)?(n.consume(a),n.exit("chunkText"),u):(n.consume(a),l)}}const Zn={tokenize:Gn},Sn={tokenize:Jn};function Gn(n){const r=this,e=[];let t=0,i,u,l;return a;function a(S){if(t<e.length){const A=e[t];return r.containerState=A[1],n.attempt(A[0].continuation,x,p)(S)}return p(S)}function x(S){if(t++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,i&&L();const A=r.events.length;let P=A,f;for(;P--;)if(r.events[P][0]==="exit"&&r.events[P][1].type==="chunkFlow"){f=r.events[P][1].end;break}k(t);let T=A;for(;T<r.events.length;)r.events[T][1].end={...f},T++;return Y(r.events,P+1,0,r.events.slice(A)),r.events.length=T,p(S)}return a(S)}function p(S){if(t===e.length){if(!i)return g(S);if(i.currentConstruct&&i.currentConstruct.concrete)return C(S);r.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Sn,c,m)(S)}function c(S){return i&&L(),k(t),g(S)}function m(S){return r.parser.lazy[r.now().line]=t!==e.length,l=r.now().offset,C(S)}function g(S){return r.containerState={},n.attempt(Sn,h,C)(S)}function h(S){return t++,e.push([r.currentConstruct,r.containerState]),g(S)}function C(S){if(S===null){i&&L(),k(0),n.consume(S);return}return i=i||r.parser.flow(r.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:u}),E(S)}function E(S){if(S===null){B(n.exit("chunkFlow"),!0),k(0),n.consume(S);return}return z(S)?(n.consume(S),B(n.exit("chunkFlow")),t=0,r.interrupt=void 0,a):(n.consume(S),E)}function B(S,A){const P=r.sliceStream(S);if(A&&P.push(null),S.previous=u,u&&(u.next=S),u=S,i.defineSkip(S.start),i.write(P),r.parser.lazy[S.start.line]){let f=i.events.length;for(;f--;)if(i.events[f][1].start.offset<l&&(!i.events[f][1].end||i.events[f][1].end.offset>l))return;const T=r.events.length;let O=T,N,q;for(;O--;)if(r.events[O][0]==="exit"&&r.events[O][1].type==="chunkFlow"){if(N){q=r.events[O][1].end;break}N=!0}for(k(t),f=T;f<r.events.length;)r.events[f][1].end={...q},f++;Y(r.events,O+1,0,r.events.slice(T)),r.events.length=f}}function k(S){let A=e.length;for(;A-- >S;){const P=e[A];r.containerState=P[1],P[0].exit.call(r,n)}e.length=S}function L(){i.write([null]),u=void 0,i=void 0,r.containerState._closeFlow=void 0}}function Jn(n,r,e){return F(n,n.attempt(this.parser.constructs.document,r,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bn(n){if(n===null||Q(n)||Un(n))return 1;if(jn(n))return 2}function xn(n,r,e){const t=[];let i=-1;for(;++i<n.length;){const u=n[i].resolveAll;u&&!t.includes(u)&&(r=u(r,e),t.push(u))}return r}const mn={name:"attention",resolveAll:Kn,tokenize:Xn};function Kn(n,r){let e=-1,t,i,u,l,a,x,p,c;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(t=e;t--;)if(n[t][0]==="exit"&&n[t][1].type==="attentionSequence"&&n[t][1]._open&&r.sliceSerialize(n[t][1]).charCodeAt(0)===r.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[t][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[t][1].end.offset-n[t][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;x=n[t][1].end.offset-n[t][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const m={...n[t][1].end},g={...n[e][1].start};In(m,-x),In(g,x),l={type:x>1?"strongSequence":"emphasisSequence",start:m,end:{...n[t][1].end}},a={type:x>1?"strongSequence":"emphasisSequence",start:{...n[e][1].start},end:g},u={type:x>1?"strongText":"emphasisText",start:{...n[t][1].end},end:{...n[e][1].start}},i={type:x>1?"strong":"emphasis",start:{...l.start},end:{...a.end}},n[t][1].end={...l.start},n[e][1].start={...a.end},p=[],n[t][1].end.offset-n[t][1].start.offset&&(p=W(p,[["enter",n[t][1],r],["exit",n[t][1],r]])),p=W(p,[["enter",i,r],["enter",l,r],["exit",l,r],["enter",u,r]]),p=W(p,xn(r.parser.constructs.insideSpan.null,n.slice(t+1,e),r)),p=W(p,[["exit",u,r],["enter",a,r],["exit",a,r],["exit",i,r]]),n[e][1].end.offset-n[e][1].start.offset?(c=2,p=W(p,[["enter",n[e][1],r],["exit",n[e][1],r]])):c=0,Y(n,t-1,e-t+3,p),e=t+p.length-c-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function Xn(n,r){const e=this.parser.constructs.attentionMarkers.null,t=this.previous,i=bn(t);let u;return l;function l(x){return u=x,n.enter("attentionSequence"),a(x)}function a(x){if(x===u)return n.consume(x),a;const p=n.exit("attentionSequence"),c=bn(x),m=!c||c===2&&i||e.includes(x),g=!i||i===2&&c||e.includes(t);return p._open=!!(u===42?m:m&&(i||!g)),p._close=!!(u===42?g:g&&(c||!m)),r(x)}}function In(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const vn={name:"autolink",tokenize:dn};function dn(n,r,e){let t=0;return i;function i(h){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(h){return U(h)?(n.consume(h),l):h===64?e(h):p(h)}function l(h){return h===43||h===45||h===46||j(h)?(t=1,a(h)):p(h)}function a(h){return h===58?(n.consume(h),t=0,x):(h===43||h===45||h===46||j(h))&&t++<32?(n.consume(h),a):(t=0,p(h))}function x(h){return h===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):h===null||h===32||h===60||hn(h)?e(h):(n.consume(h),x)}function p(h){return h===64?(n.consume(h),c):Hn(h)?(n.consume(h),p):e(h)}function c(h){return j(h)?m(h):e(h)}function m(h){return h===46?(n.consume(h),t=0,c):h===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),r):g(h)}function g(h){if((h===45||j(h))&&t++<63){const C=h===45?g:m;return n.consume(h),C}return e(h)}}const ln={partial:!0,tokenize:nt};function nt(n,r,e){return t;function t(u){return y(u)?F(n,i,"linePrefix")(u):i(u)}function i(u){return u===null||z(u)?r(u):e(u)}}const Tn={continuation:{tokenize:et},exit:rt,name:"blockQuote",tokenize:tt};function tt(n,r,e){const t=this;return i;function i(l){if(l===62){const a=t.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),u}return e(l)}function u(l){return y(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(l))}}function et(n,r,e){const t=this;return i;function i(l){return y(l)?F(n,u,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):u(l)}function u(l){return n.attempt(Tn,r,e)(l)}}function rt(n){n.exit("blockQuote")}const Fn={name:"characterEscape",tokenize:it};function it(n,r,e){return t;function t(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),i}function i(u){return Wn(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):e(u)}}const An={name:"characterReference",tokenize:ut};function ut(n,r,e){const t=this;let i=0,u,l;return a;function a(m){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),x}function x(m){return m===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(m),n.exit("characterReferenceMarkerNumeric"),p):(n.enter("characterReferenceValue"),u=31,l=j,c(m))}function p(m){return m===88||m===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(m),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,l=Qn,c):(n.enter("characterReferenceValue"),u=7,l=pn,c(m))}function c(m){if(m===59&&i){const g=n.exit("characterReferenceValue");return l===j&&!qn(t.sliceSerialize(g))?e(m):(n.enter("characterReferenceMarker"),n.consume(m),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)}return l(m)&&i++<u?(n.consume(m),c):e(m)}}const zn={partial:!0,tokenize:at},wn={concrete:!0,name:"codeFenced",tokenize:lt};function lt(n,r,e){const t=this,i={partial:!0,tokenize:P};let u=0,l=0,a;return x;function x(f){return p(f)}function p(f){const T=t.events[t.events.length-1];return u=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=f,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),c(f)}function c(f){return f===a?(l++,n.consume(f),c):l<3?e(f):(n.exit("codeFencedFenceSequence"),y(f)?F(n,m,"whitespace")(f):m(f))}function m(f){return f===null||z(f)?(n.exit("codeFencedFence"),t.interrupt?r(f):n.check(zn,E,A)(f)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(f))}function g(f){return f===null||z(f)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),m(f)):y(f)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),F(n,h,"whitespace")(f)):f===96&&f===a?e(f):(n.consume(f),g)}function h(f){return f===null||z(f)?m(f):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),C(f))}function C(f){return f===null||z(f)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),m(f)):f===96&&f===a?e(f):(n.consume(f),C)}function E(f){return n.attempt(i,A,B)(f)}function B(f){return n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),k}function k(f){return u>0&&y(f)?F(n,L,"linePrefix",u+1)(f):L(f)}function L(f){return f===null||z(f)?n.check(zn,E,A)(f):(n.enter("codeFlowValue"),S(f))}function S(f){return f===null||z(f)?(n.exit("codeFlowValue"),L(f)):(n.consume(f),S)}function A(f){return n.exit("codeFenced"),r(f)}function P(f,T,O){let N=0;return q;function q(w){return f.enter("lineEnding"),f.consume(w),f.exit("lineEnding"),I}function I(w){return f.enter("codeFencedFence"),y(w)?F(f,b,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):b(w)}function b(w){return w===a?(f.enter("codeFencedFenceSequence"),_(w)):O(w)}function _(w){return w===a?(N++,f.consume(w),_):N>=l?(f.exit("codeFencedFenceSequence"),y(w)?F(f,M,"whitespace")(w):M(w)):O(w)}function M(w){return w===null||z(w)?(f.exit("codeFencedFence"),T(w)):O(w)}}}function at(n,r,e){const t=this;return i;function i(l){return l===null?e(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u)}function u(l){return t.parser.lazy[t.now().line]?e(l):r(l)}}const on={name:"codeIndented",tokenize:st},ot={partial:!0,tokenize:ht};function st(n,r,e){const t=this;return i;function i(p){return n.enter("codeIndented"),F(n,u,"linePrefix",5)(p)}function u(p){const c=t.events[t.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?l(p):e(p)}function l(p){return p===null?x(p):z(p)?n.attempt(ot,l,x)(p):(n.enter("codeFlowValue"),a(p))}function a(p){return p===null||z(p)?(n.exit("codeFlowValue"),l(p)):(n.consume(p),a)}function x(p){return n.exit("codeIndented"),r(p)}}function ht(n,r,e){const t=this;return i;function i(l){return t.parser.lazy[t.now().line]?e(l):z(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),i):F(n,u,"linePrefix",5)(l)}function u(l){const a=t.events[t.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):z(l)?i(l):e(l)}}const pt={name:"codeText",previous:ct,resolve:mt,tokenize:xt};function mt(n){let r=n.length-4,e=3,t,i;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(t=e;++t<r;)if(n[t][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[r][1].type="codeTextPadding",e+=2,r-=2;break}}for(t=e-1,r++;++t<=r;)i===void 0?t!==r&&n[t][1].type!=="lineEnding"&&(i=t):(t===r||n[t][1].type==="lineEnding")&&(n[i][1].type="codeTextData",t!==i+2&&(n[i][1].end=n[t-1][1].end,n.splice(i+2,t-i-2),r-=t-i-2,t=i+2),i=void 0);return n}function ct(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xt(n,r,e){let t=0,i,u;return l;function l(m){return n.enter("codeText"),n.enter("codeTextSequence"),a(m)}function a(m){return m===96?(n.consume(m),t++,a):(n.exit("codeTextSequence"),x(m))}function x(m){return m===null?e(m):m===32?(n.enter("space"),n.consume(m),n.exit("space"),x):m===96?(u=n.enter("codeTextSequence"),i=0,c(m)):z(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),x):(n.enter("codeTextData"),p(m))}function p(m){return m===null||m===32||m===96||z(m)?(n.exit("codeTextData"),x(m)):(n.consume(m),p)}function c(m){return m===96?(n.consume(m),i++,c):i===t?(n.exit("codeTextSequence"),n.exit("codeText"),r(m)):(u.type="codeTextData",p(m))}}class gt{constructor(r){this.left=r?[...r]:[],this.right=[]}get(r){if(r<0||r>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+r+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return r<this.left.length?this.left[r]:this.right[this.right.length-r+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(r,e){const t=e??Number.POSITIVE_INFINITY;return t<this.left.length?this.left.slice(r,t):r>this.left.length?this.right.slice(this.right.length-t+this.left.length,this.right.length-r+this.left.length).reverse():this.left.slice(r).concat(this.right.slice(this.right.length-t+this.left.length).reverse())}splice(r,e,t){const i=e||0;this.setCursor(Math.trunc(r));const u=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return t&&d(this.left,t),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(r){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(r)}pushMany(r){this.setCursor(Number.POSITIVE_INFINITY),d(this.left,r)}unshift(r){this.setCursor(0),this.right.push(r)}unshiftMany(r){this.setCursor(0),d(this.right,r.reverse())}setCursor(r){if(!(r===this.left.length||r>this.left.length&&this.right.length===0||r<0&&this.left.length===0))if(r<this.left.length){const e=this.left.splice(r,Number.POSITIVE_INFINITY);d(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-r,Number.POSITIVE_INFINITY);d(this.left,e.reverse())}}}function d(n,r){let e=0;if(r.length<1e4)n.push(...r);else for(;e<r.length;)n.push(...r.slice(e,e+1e4)),e+=1e4}function _n(n){const r={};let e=-1,t,i,u,l,a,x,p;const c=new gt(n);for(;++e<c.length;){for(;e in r;)e=r[e];if(t=c.get(e),e&&t[1].type==="chunkFlow"&&c.get(e-1)[1].type==="listItemPrefix"&&(x=t[1]._tokenizer.events,u=0,u<x.length&&x[u][1].type==="lineEndingBlank"&&(u+=2),u<x.length&&x[u][1].type==="content"))for(;++u<x.length&&x[u][1].type!=="content";)x[u][1].type==="chunkText"&&(x[u][1]._isInFirstContentOfListItem=!0,u++);if(t[0]==="enter")t[1].contentType&&(Object.assign(r,ft(c,e)),e=r[e],p=!0);else if(t[1]._container){for(u=e,i=void 0;u--;)if(l=c.get(u),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=u);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(t[1].end={...c.get(i)[1].start},a=c.slice(i,e),a.unshift(t),c.splice(i,e-i+1,a))}}return Y(n,0,Number.POSITIVE_INFINITY,c.slice(0)),!p}function ft(n,r){const e=n.get(r)[1],t=n.get(r)[2];let i=r-1;const u=[];let l=e._tokenizer;l||(l=t.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const a=l.events,x=[],p={};let c,m,g=-1,h=e,C=0,E=0;const B=[E];for(;h;){for(;n.get(++i)[1]!==h;);u.push(i),h._tokenizer||(c=t.sliceStream(h),h.next||c.push(null),m&&l.defineSkip(h.start),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(c),h._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=h,h=h.next}for(h=e;++g<a.length;)a[g][0]==="exit"&&a[g-1][0]==="enter"&&a[g][1].type===a[g-1][1].type&&a[g][1].start.line!==a[g][1].end.line&&(E=g+1,B.push(E),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(l.events=[],h?(h._tokenizer=void 0,h.previous=void 0):B.pop(),g=B.length;g--;){const k=a.slice(B[g],B[g+1]),L=u.pop();x.push([L,L+k.length-1]),n.splice(L,2,k)}for(x.reverse(),g=-1;++g<x.length;)p[C+x[g][0]]=C+x[g][1],C+=x[g][1]-x[g][0]-1;return p}const kt={resolve:bt,tokenize:It},St={partial:!0,tokenize:zt};function bt(n){return _n(n),n}function It(n,r){let e;return t;function t(a){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?u(a):z(a)?n.check(St,l,u)(a):(n.consume(a),i)}function u(a){return n.exit("chunkContent"),n.exit("content"),r(a)}function l(a){return n.consume(a),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,i}}function zt(n,r,e){const t=this;return i;function i(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),F(n,u,"linePrefix")}function u(l){if(l===null||z(l))return e(l);const a=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?r(l):n.interrupt(t.parser.constructs.flow,e,r)(l)}}function Pn(n,r,e,t,i,u,l,a,x){const p=x||Number.POSITIVE_INFINITY;let c=0;return m;function m(k){return k===60?(n.enter(t),n.enter(i),n.enter(u),n.consume(k),n.exit(u),g):k===null||k===32||k===41||hn(k)?e(k):(n.enter(t),n.enter(l),n.enter(a),n.enter("chunkString",{contentType:"string"}),E(k))}function g(k){return k===62?(n.enter(u),n.consume(k),n.exit(u),n.exit(i),n.exit(t),r):(n.enter(a),n.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===62?(n.exit("chunkString"),n.exit(a),g(k)):k===null||k===60||z(k)?e(k):(n.consume(k),k===92?C:h)}function C(k){return k===60||k===62||k===92?(n.consume(k),h):h(k)}function E(k){return!c&&(k===null||k===41||Q(k))?(n.exit("chunkString"),n.exit(a),n.exit(l),n.exit(t),r(k)):c<p&&k===40?(n.consume(k),c++,E):k===41?(n.consume(k),c--,E):k===null||k===32||k===40||hn(k)?e(k):(n.consume(k),k===92?B:E)}function B(k){return k===40||k===41||k===92?(n.consume(k),E):E(k)}}function Bn(n,r,e,t,i,u){const l=this;let a=0,x;return p;function p(h){return n.enter(t),n.enter(i),n.consume(h),n.exit(i),n.enter(u),c}function c(h){return a>999||h===null||h===91||h===93&&!x||h===94&&!a&&"_hiddenFootnoteSupport"in l.parser.constructs?e(h):h===93?(n.exit(u),n.enter(i),n.consume(h),n.exit(i),n.exit(t),r):z(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),c):(n.enter("chunkString",{contentType:"string"}),m(h))}function m(h){return h===null||h===91||h===93||z(h)||a++>999?(n.exit("chunkString"),c(h)):(n.consume(h),x||(x=!y(h)),h===92?g:m)}function g(h){return h===91||h===92||h===93?(n.consume(h),a++,m):m(h)}}function Ln(n,r,e,t,i,u){let l;return a;function a(g){return g===34||g===39||g===40?(n.enter(t),n.enter(i),n.consume(g),n.exit(i),l=g===40?41:g,x):e(g)}function x(g){return g===l?(n.enter(i),n.consume(g),n.exit(i),n.exit(t),r):(n.enter(u),p(g))}function p(g){return g===l?(n.exit(u),x(l)):g===null?e(g):z(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),F(n,p,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),c(g))}function c(g){return g===l||g===null||z(g)?(n.exit("chunkString"),p(g)):(n.consume(g),g===92?m:c)}function m(g){return g===l||g===92?(n.consume(g),c):c(g)}}function nn(n,r){let e;return t;function t(i){return z(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),e=!0,t):y(i)?F(n,t,e?"linePrefix":"lineSuffix")(i):r(i)}}const wt={name:"definition",tokenize:Ct},yt={partial:!0,tokenize:Et};function Ct(n,r,e){const t=this;let i;return u;function u(h){return n.enter("definition"),l(h)}function l(h){return Bn.call(t,n,a,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=cn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),h===58?(n.enter("definitionMarker"),n.consume(h),n.exit("definitionMarker"),x):e(h)}function x(h){return Q(h)?nn(n,p)(h):p(h)}function p(h){return Pn(n,c,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return n.attempt(yt,m,m)(h)}function m(h){return y(h)?F(n,g,"whitespace")(h):g(h)}function g(h){return h===null||z(h)?(n.exit("definition"),t.parser.defined.push(i),r(h)):e(h)}}function Et(n,r,e){return t;function t(a){return Q(a)?nn(n,i)(a):e(a)}function i(a){return Ln(n,u,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function u(a){return y(a)?F(n,l,"whitespace")(a):l(a)}function l(a){return a===null||z(a)?r(a):e(a)}}const Tt={name:"hardBreakEscape",tokenize:Ft};function Ft(n,r,e){return t;function t(u){return n.enter("hardBreakEscape"),n.consume(u),i}function i(u){return z(u)?(n.exit("hardBreakEscape"),r(u)):e(u)}}const At={name:"headingAtx",resolve:_t,tokenize:Pt};function _t(n,r){let e=n.length-2,t=3,i,u;return n[t][1].type==="whitespace"&&(t+=2),e-2>t&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(t===e-1||e-4>t&&n[e-2][1].type==="whitespace")&&(e-=t+1===e?2:4),e>t&&(i={type:"atxHeadingText",start:n[t][1].start,end:n[e][1].end},u={type:"chunkText",start:n[t][1].start,end:n[e][1].end,contentType:"text"},Y(n,t,e-t+1,[["enter",i,r],["enter",u,r],["exit",u,r],["exit",i,r]])),n}function Pt(n,r,e){let t=0;return i;function i(c){return n.enter("atxHeading"),u(c)}function u(c){return n.enter("atxHeadingSequence"),l(c)}function l(c){return c===35&&t++<6?(n.consume(c),l):c===null||Q(c)?(n.exit("atxHeadingSequence"),a(c)):e(c)}function a(c){return c===35?(n.enter("atxHeadingSequence"),x(c)):c===null||z(c)?(n.exit("atxHeading"),r(c)):y(c)?F(n,a,"whitespace")(c):(n.enter("atxHeadingText"),p(c))}function x(c){return c===35?(n.consume(c),x):(n.exit("atxHeadingSequence"),a(c))}function p(c){return c===null||c===35||Q(c)?(n.exit("atxHeadingText"),a(c)):(n.consume(c),p)}}const Bt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yn=["pre","script","style","textarea"],Lt={concrete:!0,name:"htmlFlow",resolveTo:Nt,tokenize:qt},Ot={partial:!0,tokenize:Vt},Mt={partial:!0,tokenize:Dt};function Nt(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function qt(n,r,e){const t=this;let i,u,l,a,x;return p;function p(s){return c(s)}function c(s){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(s),m}function m(s){return s===33?(n.consume(s),g):s===47?(n.consume(s),u=!0,E):s===63?(n.consume(s),i=3,t.interrupt?r:o):U(s)?(n.consume(s),l=String.fromCharCode(s),B):e(s)}function g(s){return s===45?(n.consume(s),i=2,h):s===91?(n.consume(s),i=5,a=0,C):U(s)?(n.consume(s),i=4,t.interrupt?r:o):e(s)}function h(s){return s===45?(n.consume(s),t.interrupt?r:o):e(s)}function C(s){const G="CDATA[";return s===G.charCodeAt(a++)?(n.consume(s),a===G.length?t.interrupt?r:b:C):e(s)}function E(s){return U(s)?(n.consume(s),l=String.fromCharCode(s),B):e(s)}function B(s){if(s===null||s===47||s===62||Q(s)){const G=s===47,tn=l.toLowerCase();return!G&&!u&&yn.includes(tn)?(i=1,t.interrupt?r(s):b(s)):Bt.includes(l.toLowerCase())?(i=6,G?(n.consume(s),k):t.interrupt?r(s):b(s)):(i=7,t.interrupt&&!t.parser.lazy[t.now().line]?e(s):u?L(s):S(s))}return s===45||j(s)?(n.consume(s),l+=String.fromCharCode(s),B):e(s)}function k(s){return s===62?(n.consume(s),t.interrupt?r:b):e(s)}function L(s){return y(s)?(n.consume(s),L):q(s)}function S(s){return s===47?(n.consume(s),q):s===58||s===95||U(s)?(n.consume(s),A):y(s)?(n.consume(s),S):q(s)}function A(s){return s===45||s===46||s===58||s===95||j(s)?(n.consume(s),A):P(s)}function P(s){return s===61?(n.consume(s),f):y(s)?(n.consume(s),P):S(s)}function f(s){return s===null||s===60||s===61||s===62||s===96?e(s):s===34||s===39?(n.consume(s),x=s,T):y(s)?(n.consume(s),f):O(s)}function T(s){return s===x?(n.consume(s),x=null,N):s===null||z(s)?e(s):(n.consume(s),T)}function O(s){return s===null||s===34||s===39||s===47||s===60||s===61||s===62||s===96||Q(s)?P(s):(n.consume(s),O)}function N(s){return s===47||s===62||y(s)?S(s):e(s)}function q(s){return s===62?(n.consume(s),I):e(s)}function I(s){return s===null||z(s)?b(s):y(s)?(n.consume(s),I):e(s)}function b(s){return s===45&&i===2?(n.consume(s),R):s===60&&i===1?(n.consume(s),D):s===62&&i===4?(n.consume(s),Z):s===63&&i===3?(n.consume(s),o):s===93&&i===5?(n.consume(s),K):z(s)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(Ot,X,_)(s)):s===null||z(s)?(n.exit("htmlFlowData"),_(s)):(n.consume(s),b)}function _(s){return n.check(Mt,M,X)(s)}function M(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),w}function w(s){return s===null||z(s)?_(s):(n.enter("htmlFlowData"),b(s))}function R(s){return s===45?(n.consume(s),o):b(s)}function D(s){return s===47?(n.consume(s),l="",$):b(s)}function $(s){if(s===62){const G=l.toLowerCase();return yn.includes(G)?(n.consume(s),Z):b(s)}return U(s)&&l.length<8?(n.consume(s),l+=String.fromCharCode(s),$):b(s)}function K(s){return s===93?(n.consume(s),o):b(s)}function o(s){return s===62?(n.consume(s),Z):s===45&&i===2?(n.consume(s),o):b(s)}function Z(s){return s===null||z(s)?(n.exit("htmlFlowData"),X(s)):(n.consume(s),Z)}function X(s){return n.exit("htmlFlow"),r(s)}}function Dt(n,r,e){const t=this;return i;function i(l){return z(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),u):e(l)}function u(l){return t.parser.lazy[t.now().line]?e(l):r(l)}}function Vt(n,r,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(ln,r,e)}}const Rt={name:"htmlText",tokenize:Ht};function Ht(n,r,e){const t=this;let i,u,l;return a;function a(o){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(o),x}function x(o){return o===33?(n.consume(o),p):o===47?(n.consume(o),P):o===63?(n.consume(o),S):U(o)?(n.consume(o),O):e(o)}function p(o){return o===45?(n.consume(o),c):o===91?(n.consume(o),u=0,C):U(o)?(n.consume(o),L):e(o)}function c(o){return o===45?(n.consume(o),h):e(o)}function m(o){return o===null?e(o):o===45?(n.consume(o),g):z(o)?(l=m,D(o)):(n.consume(o),m)}function g(o){return o===45?(n.consume(o),h):m(o)}function h(o){return o===62?R(o):o===45?g(o):m(o)}function C(o){const Z="CDATA[";return o===Z.charCodeAt(u++)?(n.consume(o),u===Z.length?E:C):e(o)}function E(o){return o===null?e(o):o===93?(n.consume(o),B):z(o)?(l=E,D(o)):(n.consume(o),E)}function B(o){return o===93?(n.consume(o),k):E(o)}function k(o){return o===62?R(o):o===93?(n.consume(o),k):E(o)}function L(o){return o===null||o===62?R(o):z(o)?(l=L,D(o)):(n.consume(o),L)}function S(o){return o===null?e(o):o===63?(n.consume(o),A):z(o)?(l=S,D(o)):(n.consume(o),S)}function A(o){return o===62?R(o):S(o)}function P(o){return U(o)?(n.consume(o),f):e(o)}function f(o){return o===45||j(o)?(n.consume(o),f):T(o)}function T(o){return z(o)?(l=T,D(o)):y(o)?(n.consume(o),T):R(o)}function O(o){return o===45||j(o)?(n.consume(o),O):o===47||o===62||Q(o)?N(o):e(o)}function N(o){return o===47?(n.consume(o),R):o===58||o===95||U(o)?(n.consume(o),q):z(o)?(l=N,D(o)):y(o)?(n.consume(o),N):R(o)}function q(o){return o===45||o===46||o===58||o===95||j(o)?(n.consume(o),q):I(o)}function I(o){return o===61?(n.consume(o),b):z(o)?(l=I,D(o)):y(o)?(n.consume(o),I):N(o)}function b(o){return o===null||o===60||o===61||o===62||o===96?e(o):o===34||o===39?(n.consume(o),i=o,_):z(o)?(l=b,D(o)):y(o)?(n.consume(o),b):(n.consume(o),M)}function _(o){return o===i?(n.consume(o),i=void 0,w):o===null?e(o):z(o)?(l=_,D(o)):(n.consume(o),_)}function M(o){return o===null||o===34||o===39||o===60||o===61||o===96?e(o):o===47||o===62||Q(o)?N(o):(n.consume(o),M)}function w(o){return o===47||o===62||Q(o)?N(o):e(o)}function R(o){return o===62?(n.consume(o),n.exit("htmlTextData"),n.exit("htmlText"),r):e(o)}function D(o){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),$}function $(o){return y(o)?F(n,K,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):K(o)}function K(o){return n.enter("htmlTextData"),l(o)}}const gn={name:"labelEnd",resolveAll:Ut,resolveTo:Yt,tokenize:$t},Qt={tokenize:Zt},Wt={tokenize:Gt},jt={tokenize:Jt};function Ut(n){let r=-1;const e=[];for(;++r<n.length;){const t=n[r][1];if(e.push(n[r]),t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd"){const i=t.type==="labelImage"?4:2;t.type="data",r+=i}}return n.length!==e.length&&Y(n,0,n.length,e),n}function Yt(n,r){let e=n.length,t=0,i,u,l,a;for(;e--;)if(i=n[e][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[e][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(n[e][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=e,i.type!=="labelLink")){t=2;break}}else i.type==="labelEnd"&&(l=e);const x={type:n[u][1].type==="labelLink"?"link":"image",start:{...n[u][1].start},end:{...n[n.length-1][1].end}},p={type:"label",start:{...n[u][1].start},end:{...n[l][1].end}},c={type:"labelText",start:{...n[u+t+2][1].end},end:{...n[l-2][1].start}};return a=[["enter",x,r],["enter",p,r]],a=W(a,n.slice(u+1,u+t+3)),a=W(a,[["enter",c,r]]),a=W(a,xn(r.parser.constructs.insideSpan.null,n.slice(u+t+4,l-3),r)),a=W(a,[["exit",c,r],n[l-2],n[l-1],["exit",p,r]]),a=W(a,n.slice(l+1)),a=W(a,[["exit",x,r]]),Y(n,u,n.length,a),n}function $t(n,r,e){const t=this;let i=t.events.length,u,l;for(;i--;)if((t.events[i][1].type==="labelImage"||t.events[i][1].type==="labelLink")&&!t.events[i][1]._balanced){u=t.events[i][1];break}return a;function a(g){return u?u._inactive?m(g):(l=t.parser.defined.includes(cn(t.sliceSerialize({start:u.end,end:t.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(g),n.exit("labelMarker"),n.exit("labelEnd"),x):e(g)}function x(g){return g===40?n.attempt(Qt,c,l?c:m)(g):g===91?n.attempt(Wt,c,l?p:m)(g):l?c(g):m(g)}function p(g){return n.attempt(jt,c,m)(g)}function c(g){return r(g)}function m(g){return u._balanced=!0,e(g)}}function Zt(n,r,e){return t;function t(m){return n.enter("resource"),n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),i}function i(m){return Q(m)?nn(n,u)(m):u(m)}function u(m){return m===41?c(m):Pn(n,l,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return Q(m)?nn(n,x)(m):c(m)}function a(m){return e(m)}function x(m){return m===34||m===39||m===40?Ln(n,p,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):c(m)}function p(m){return Q(m)?nn(n,c)(m):c(m)}function c(m){return m===41?(n.enter("resourceMarker"),n.consume(m),n.exit("resourceMarker"),n.exit("resource"),r):e(m)}}function Gt(n,r,e){const t=this;return i;function i(a){return Bn.call(t,n,u,l,"reference","referenceMarker","referenceString")(a)}function u(a){return t.parser.defined.includes(cn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?r(a):e(a)}function l(a){return e(a)}}function Jt(n,r,e){return t;function t(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),i}function i(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),r):e(u)}}const Kt={name:"labelStartImage",resolveAll:gn.resolveAll,tokenize:Xt};function Xt(n,r,e){const t=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),u}function u(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),l):e(a)}function l(a){return a===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(a):r(a)}}const vt={name:"labelStartLink",resolveAll:gn.resolveAll,tokenize:dt};function dt(n,r,e){const t=this;return i;function i(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),u}function u(l){return l===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(l):r(l)}}const sn={name:"lineEnding",tokenize:ne};function ne(n,r){return e;function e(t){return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),F(n,r,"linePrefix")}}const un={name:"thematicBreak",tokenize:te};function te(n,r,e){let t=0,i;return u;function u(p){return n.enter("thematicBreak"),l(p)}function l(p){return i=p,a(p)}function a(p){return p===i?(n.enter("thematicBreakSequence"),x(p)):t>=3&&(p===null||z(p))?(n.exit("thematicBreak"),r(p)):e(p)}function x(p){return p===i?(n.consume(p),t++,x):(n.exit("thematicBreakSequence"),y(p)?F(n,a,"whitespace")(p):a(p))}}const H={continuation:{tokenize:ue},exit:ae,name:"list",tokenize:ie},ee={partial:!0,tokenize:oe},re={partial:!0,tokenize:le};function ie(n,r,e){const t=this,i=t.events[t.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return a;function a(h){const C=t.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(C==="listUnordered"?!t.containerState.marker||h===t.containerState.marker:pn(h)){if(t.containerState.type||(t.containerState.type=C,n.enter(C,{_container:!0})),C==="listUnordered")return n.enter("listItemPrefix"),h===42||h===45?n.check(un,e,p)(h):p(h);if(!t.interrupt||h===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),x(h)}return e(h)}function x(h){return pn(h)&&++l<10?(n.consume(h),x):(!t.interrupt||l<2)&&(t.containerState.marker?h===t.containerState.marker:h===41||h===46)?(n.exit("listItemValue"),p(h)):e(h)}function p(h){return n.enter("listItemMarker"),n.consume(h),n.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||h,n.check(ln,t.interrupt?e:c,n.attempt(ee,g,m))}function c(h){return t.containerState.initialBlankLine=!0,u++,g(h)}function m(h){return y(h)?(n.enter("listItemPrefixWhitespace"),n.consume(h),n.exit("listItemPrefixWhitespace"),g):e(h)}function g(h){return t.containerState.size=u+t.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(h)}}function ue(n,r,e){const t=this;return t.containerState._closeFlow=void 0,n.check(ln,i,u);function i(a){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,F(n,r,"listItemIndent",t.containerState.size+1)(a)}function u(a){return t.containerState.furtherBlankLines||!y(a)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,l(a)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n.attempt(re,r,l)(a))}function l(a){return t.containerState._closeFlow=!0,t.interrupt=void 0,F(n,n.attempt(H,r,e),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function le(n,r,e){const t=this;return F(n,i,"listItemIndent",t.containerState.size+1);function i(u){const l=t.events[t.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===t.containerState.size?r(u):e(u)}}function ae(n){n.exit(this.containerState.type)}function oe(n,r,e){const t=this;return F(n,i,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(u){const l=t.events[t.events.length-1];return!y(u)&&l&&l[1].type==="listItemPrefixWhitespace"?r(u):e(u)}}const Cn={name:"setextUnderline",resolveTo:se,tokenize:he};function se(n,r){let e=n.length,t,i,u;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){t=e;break}n[e][1].type==="paragraph"&&(i=e)}else n[e][1].type==="content"&&n.splice(e,1),!u&&n[e][1].type==="definition"&&(u=e);const l={type:"setextHeading",start:{...n[t][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",u?(n.splice(i,0,["enter",l,r]),n.splice(u+1,0,["exit",n[t][1],r]),n[t][1].end={...n[u][1].end}):n[t][1]=l,n.push(["exit",l,r]),n}function he(n,r,e){const t=this;let i;return u;function u(p){let c=t.events.length,m;for(;c--;)if(t.events[c][1].type!=="lineEnding"&&t.events[c][1].type!=="linePrefix"&&t.events[c][1].type!=="content"){m=t.events[c][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||m)?(n.enter("setextHeadingLine"),i=p,l(p)):e(p)}function l(p){return n.enter("setextHeadingLineSequence"),a(p)}function a(p){return p===i?(n.consume(p),a):(n.exit("setextHeadingLineSequence"),y(p)?F(n,x,"lineSuffix")(p):x(p))}function x(p){return p===null||z(p)?(n.exit("setextHeadingLine"),r(p)):e(p)}}const pe={tokenize:me};function me(n){const r=this,e=n.attempt(ln,t,n.attempt(this.parser.constructs.flowInitial,i,F(n,n.attempt(this.parser.constructs.flow,i,n.attempt(kt,i)),"linePrefix")));return e;function t(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),r.currentConstruct=void 0,e}function i(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),r.currentConstruct=void 0,e}}const ce={resolveAll:Mn()},xe=On("string"),ge=On("text");function On(n){return{resolveAll:Mn(n==="text"?fe:void 0),tokenize:r};function r(e){const t=this,i=this.parser.constructs[n],u=e.attempt(i,l,a);return l;function l(c){return p(c)?u(c):a(c)}function a(c){if(c===null){e.consume(c);return}return e.enter("data"),e.consume(c),x}function x(c){return p(c)?(e.exit("data"),u(c)):(e.consume(c),x)}function p(c){if(c===null)return!0;const m=i[c];let g=-1;if(m)for(;++g<m.length;){const h=m[g];if(!h.previous||h.previous.call(t,t.previous))return!0}return!1}}}function Mn(n){return r;function r(e,t){let i=-1,u;for(;++i<=e.length;)u===void 0?e[i]&&e[i][1].type==="data"&&(u=i,i++):(!e[i]||e[i][1].type!=="data")&&(i!==u+2&&(e[u][1].end=e[i-1][1].end,e.splice(u+2,i-u-2),i=u+2),u=void 0);return n?n(e,t):e}}function fe(n,r){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const t=n[e-1][1],i=r.sliceStream(t);let u=i.length,l=-1,a=0,x;for(;u--;){const p=i[u];if(typeof p=="string"){for(l=p.length;p.charCodeAt(l-1)===32;)a++,l--;if(l)break;l=-1}else if(p===-2)x=!0,a++;else if(p!==-1){u++;break}}if(r._contentTypeTextTrailing&&e===n.length&&(a=0),a){const p={type:e===n.length||x||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?l:t.start._bufferIndex+l,_index:t.start._index+u,line:t.end.line,column:t.end.column-a,offset:t.end.offset-a},end:{...t.end}};t.end={...p.start},t.start.offset===t.end.offset?Object.assign(t,p):(n.splice(e,0,["enter",p,r],["exit",p,r]),e+=2)}e++}return n}const ke={42:H,43:H,45:H,48:H,49:H,50:H,51:H,52:H,53:H,54:H,55:H,56:H,57:H,62:Tn},Se={91:wt},be={[-2]:on,[-1]:on,32:on},Ie={35:At,42:un,45:[Cn,un],60:Lt,61:Cn,95:un,96:wn,126:wn},ze={38:An,92:Fn},we={[-5]:sn,[-4]:sn,[-3]:sn,33:Kt,38:An,42:mn,60:[vn,Rt],91:vt,92:[Tt,Fn],93:gn,95:mn,96:pt},ye={null:[mn,ce]},Ce={null:[42,95]},Ee={null:[]},Te=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Ce,contentInitial:Se,disable:Ee,document:ke,flow:Ie,flowInitial:be,insideSpan:ye,string:ze,text:we},Symbol.toStringTag,{value:"Module"}));function Fe(n,r,e){let t={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const i={},u=[];let l=[],a=[];const x={attempt:T(P),check:T(f),consume:L,enter:S,exit:A,interrupt:T(f,{interrupt:!0})},p={code:null,containerState:{},defineSkip:E,events:[],now:C,parser:n,previous:null,sliceSerialize:g,sliceStream:h,write:m};let c=r.tokenize.call(p,x);return r.resolveAll&&u.push(r),p;function m(I){return l=W(l,I),B(),l[l.length-1]!==null?[]:(O(r,0),p.events=xn(u,p.events,p),p.events)}function g(I,b){return _e(h(I),b)}function h(I){return Ae(l,I)}function C(){const{_bufferIndex:I,_index:b,line:_,column:M,offset:w}=t;return{_bufferIndex:I,_index:b,line:_,column:M,offset:w}}function E(I){i[I.line]=I.column,q()}function B(){let I;for(;t._index<l.length;){const b=l[t._index];if(typeof b=="string")for(I=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===I&&t._bufferIndex<b.length;)k(b.charCodeAt(t._bufferIndex));else k(b)}}function k(I){c=c(I)}function L(I){z(I)?(t.line++,t.column=1,t.offset+=I===-3?2:1,q()):I!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===l[t._index].length&&(t._bufferIndex=-1,t._index++)),p.previous=I}function S(I,b){const _=b||{};return _.type=I,_.start=C(),p.events.push(["enter",_,p]),a.push(_),_}function A(I){const b=a.pop();return b.end=C(),p.events.push(["exit",b,p]),b}function P(I,b){O(I,b.from)}function f(I,b){b.restore()}function T(I,b){return _;function _(M,w,R){let D,$,K,o;return Array.isArray(M)?X(M):"tokenize"in M?X([M]):Z(M);function Z(V){return an;function an(v){const en=v!==null&&V[v],rn=v!==null&&V.null,Nn=[...Array.isArray(en)?en:en?[en]:[],...Array.isArray(rn)?rn:rn?[rn]:[]];return X(Nn)(v)}}function X(V){return D=V,$=0,V.length===0?R:s(V[$])}function s(V){return an;function an(v){return o=N(),K=V,V.partial||(p.currentConstruct=V),V.name&&p.parser.constructs.disable.null.includes(V.name)?tn():V.tokenize.call(b?Object.assign(Object.create(p),b):p,x,G,tn)(v)}}function G(V){return I(K,o),w}function tn(V){return o.restore(),++$<D.length?s(D[$]):R}}}function O(I,b){I.resolveAll&&!u.includes(I)&&u.push(I),I.resolve&&Y(p.events,b,p.events.length-b,I.resolve(p.events.slice(b),p)),I.resolveTo&&(p.events=I.resolveTo(p.events,p))}function N(){const I=C(),b=p.previous,_=p.currentConstruct,M=p.events.length,w=Array.from(a);return{from:M,restore:R};function R(){t=I,p.previous=b,p.currentConstruct=_,p.events.length=M,a=w,q()}}function q(){t.line in i&&t.column<2&&(t.column=i[t.line],t.offset+=i[t.line]-1)}}function Ae(n,r){const e=r.start._index,t=r.start._bufferIndex,i=r.end._index,u=r.end._bufferIndex;let l;if(e===i)l=[n[e].slice(t,u)];else{if(l=n.slice(e,i),t>-1){const a=l[0];typeof a=="string"?l[0]=a.slice(t):l.shift()}u>0&&l.push(n[i].slice(0,u))}return l}function _e(n,r){let e=-1;const t=[];let i;for(;++e<n.length;){const u=n[e];let l;if(typeof u=="string")l=u;else switch(u){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=r?" ":"	";break}case-1:{if(!r&&i)continue;l=" ";break}default:l=String.fromCharCode(u)}i=u===-2,t.push(l)}return t.join("")}function Pe(n){const t={constructs:Dn([Te,...(n||{}).extensions||[]]),content:i(Yn),defined:[],document:i(Zn),flow:i(pe),lazy:{},string:i(xe),text:i(ge)};return t;function i(u){return l;function l(a){return Fe(t,u,a)}}}function Be(n){for(;!_n(n););return n}const En=/[\0\t\n\r]/g;function Le(){let n=1,r="",e=!0,t;return i;function i(u,l,a){const x=[];let p,c,m,g,h;for(u=r+(typeof u=="string"?u.toString():new TextDecoder(l||void 0).decode(u)),m=0,r="",e&&(u.charCodeAt(0)===65279&&m++,e=void 0);m<u.length;){if(En.lastIndex=m,p=En.exec(u),g=p&&p.index!==void 0?p.index:u.length,h=u.charCodeAt(g),!p){r=u.slice(m);break}if(h===10&&m===g&&t)x.push(-3),t=void 0;else switch(t&&(x.push(-5),t=void 0),m<g&&(x.push(u.slice(m,g)),n+=g-m),h){case 0:{x.push(65533),n++;break}case 9:{for(c=Math.ceil(n/4)*4,x.push(-2);n++<c;)x.push(-1);break}case 10:{x.push(-4),n=1;break}default:t=!0,n=1}m=g+1}return a&&(t&&x.push(-5),r&&x.push(r),x.push(null)),x}}export{Q as a,nn as b,z as c,jn as d,j as e,F as f,U as g,hn as h,ln as i,Le as j,Be as k,gn as l,y as m,cn as n,qn as o,Pe as p,Un as u};
