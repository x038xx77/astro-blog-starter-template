import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r as N}from"./index.C1SLTdIO.js";import{s as m,a as t,b as j}from"./index.95d291e9.B1QKA2wv.js";import{A as g}from"./index.BXk8rcrj.js";import h from"./markdown-text.BaaVoOcN.js";import{l as n}from"./locale_text_site.BvdD-9Qv.js";import{T as f,a as y}from"./index.DT7__spe.js";import{p}from"./products.CIYfErmN.js";import"./iconBase.10d0k-hK.js";import"./preprocess.B9s5ywOo.js";const C=({productSlug:o,title:a,description:i,onClose:l})=>{const r=()=>{window.location.href=`/products/${o}`};return s.jsx("div",{style:{zIndex:9999},className:` ${m.modalOverlay}`,children:s.jsxs("div",{className:`h-[500px] overflow-y-auto ${m.modalContent}`,children:[s.jsx("button",{className:"absolute bg-red-300 rounded-full p-1 top-2 right-10 text-gray-500 hover:text-gray-800",onClick:l,"aria-label":"Close modal",children:s.jsx(g,{size:24})}),s.jsx("div",{className:`pt-4 ${m.modalTitle}`,children:s.jsx(h,{text:a})}),s.jsx("div",{className:m.modalDescription,children:s.jsx(h,{text:i})}),s.jsx("button",{className:m.closeButton,onClick:r,children:n.components.reactComponents.productDescription.btnDetails})]})})},v=({productData:o,productSlug:a,onMoreDetails:i})=>{const{title:l,price:r,discount:u,image:x,is_active:e,is_delivery:c}=o,d=r-r*Number(u)/100;return s.jsxs("div",{style:{backgroundColor:p?.bgCard,color:p?.cardTextColor},className:t.productCard,children:[x?.src&&s.jsx("div",{className:t.imageWrapper,children:s.jsx("img",{src:`${x.src}?w=600&h=400&format=webp`,alt:l,className:`${t.productImage} ${p.isBlackAndWhitePhoto?"grayscale":""}`})}),s.jsxs("div",{className:t.productDetails,children:[s.jsx("div",{className:t.productTitle,children:s.jsx(h,{text:l})}),!e&&s.jsx(f,{size:48,color:"red",className:t.statusIcon}),s.jsx("div",{className:t.priceContainer,children:Number(u)>0?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:t.originalPrice,children:[r.toFixed(2)," ",n.globalSettings.iconCurrency]}),s.jsxs("span",{className:t.discountedPrice,children:[d.toFixed(2)," ",n.globalSettings.iconCurrency]})]}):s.jsxs("span",{className:t.productPrice,children:[r.toFixed(2)," ",n.globalSettings.iconCurrency]})}),c&&s.jsx("div",{className:t.deliveryIcon,children:s.jsx(y,{size:24})}),s.jsxs("div",{className:t.buttonsContainer,children:[s.jsx("button",{className:t.moreButton,onClick:()=>a&&i(a),children:n.components.reactComponents.productCard.btnDetails}),o.is_payment_button?s.jsx("a",{href:`/init-payment/${a}`,children:s.jsx("button",{className:t.payButton,children:n.components.reactComponents.productCard.btnPay})}):s.jsx("a",{href:`/send-order/${a}`,children:s.jsx("button",{className:t.payButton,children:s.jsx("span",{className:"orderText",children:p?.text_button_to_order})})})]})]})]})},S=({productsColection:o})=>{const[a,i]=N.useState(null),r=(o?.map(e=>({...e,data:{...e.data,price:typeof e.data.price=="string"?parseFloat(e.data.price):e.data.price,discount:typeof e.data.discount=="string"?parseFloat(e.data.discount):e.data.discount}}))).filter(e=>e.data.is_active).sort((e,c)=>{const d=Number(e.data.serial_number??0),b=Number(c.data.serial_number??0);return d-b}),u=(e,c,d)=>{i({slug:e,title:c,body:d})},x=()=>{i(null)};return r.length===0?null:s.jsx("div",{className:j.container,children:s.jsxs("div",{className:j.productList,children:[r.map(e=>s.jsx(v,{productSlug:e.slug,productData:e.data,onMoreDetails:()=>e.slug&&u(e.slug,e.data.title,e.data.description)},e.id)),a&&s.jsx(C,{productSlug:a.slug,title:a.title,description:a.body,onClose:x})]})})};export{S as default};
